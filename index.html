<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- displays site properly based on user's device -->

  <link rel="icon" type="image/png" sizes="32x32" href="./images/favicon-32x32.png">
  <link rel="stylesheet" href="css/main.css">
  
  <title>Frontend Mentor | Interactive card details form</title>

  
</head>
<body>

  <div class="image-bg">
    <img src="./images/bg-main-desktop.png" alt="">
  </div>

  <main>
    <div class="card-container">
      <div class="front-card">
        <img src="images/bg-card-front.png" alt="">
      </div>
      <div class="back-card">
        <img src="./images/bg-card-back.png" alt="" >
      </div>
    </div>
    <div class="form-container">
      <form >
        <div class="input">
          <label for="card-name">cardholder name</label>
          <input type="text" data-id="error-name" data-ok="1" placeholder="eg. Jane Appleseed" id="card-name">
          <small id="error-name" >Can't be blank</small>
        </div>
        <div class="input">
          <label for="card-number">card number</label>
          <input type="text" data-id="error-num"  maxlength="19" data-ok="0"  placeholder="eg. 0000 1234 0000 1234" id="card-number">
          <small id="error-num">Can't be blank</small>
        </div>
        <div class="cvc-expdate">
          
            <div class="input expdate">
              <label for="exp-mon">Exp. date (mm/yy)</label>
              <div class="container">
                <input type="tel" data-id="error-exp"  data-ok="0" maxlength="2"  placeholder="MM" id="exp-mon">
              <input type="text" data-id="error-exp"  maxlength="2"  placeholder="YY" id="exp-yr">
            </div>
            <small id="error-exp">Can't be blank</small>
          </div>
          <div class="cvc">
            <div class="input">
              <label for="card-cvc">cvc</label>
              <input type="text" data-id="error-cvc" maxlength="3" data-ok="0" placeholder="eg. 123" id="card-cvc">
              <small id="error-cvc">Can't be blank</small>
            </div>
          </div>
        </div>
        <button type="submit">Confirm</button>
      </form>
    </div>
  </main>

  <script>
        let inputs = document.querySelectorAll('input');
        document.querySelector("form").addEventListener("submit", (e)=> {
          e.preventDefault();
          inputs.forEach((input)=> {
            if (!input.value) {
              input.classList.add('error');
              document.getElementById(input.dataset.id).textContent = "Can't be blank"
              document.getElementById(input.dataset.id).style.opacity= "1";
             
            }
            else{
              input.classList.remove('error');
              document.getElementById(input.dataset.id).style.opacity= "0";
              if (input.dataset.ok == 0) {
                if (!/^\d+$/.test(input.value.replace(/\s/g,""))) {
                  input.classList.add('error');
                  document.getElementById(input.dataset.id).textContent ="Wrong format, numbers only";
                  document.getElementById(input.dataset.id).style.opacity= "1"; 

                   }
              }
        
            }
        
          });
        });
        inputs[1].addEventListener("keypress",(e)=>{
           let empty = "";
           let val = e.target.value;
            val = val.replace(/\s/g, '');
            for (let i = 0; i < val.length; i++) {
            if (i % 4 == 0 && i > 0) {
             empty = empty.concat(" ");
            }
            empty= empty.concat(val[i]);
            }
            inputs[1].value = empty;
          });
  </script>

</body>
</html>